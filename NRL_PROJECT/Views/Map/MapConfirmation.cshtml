@model NRL_PROJECT.Models.MapData

@{
    ViewData["Title"] = "Map Confirmation";
    Layout = "_Layout";

    string displayLat = Model.Latitude.ToString();
    string displayLng = Model.Longitude.ToString();
    int zoomLevel = Model.MapZoomLevel;
}
<div class="max-w-4xl mx-auto px-4 py-10">
    <!-- Title -->
    <h1 class="text-4xl font-extrabold text-purple-700 text-center mb-4 tracking-wide">
        ‚úÖ Kartbekreftelse
    </h1>
    <p class="text-gray-600 text-center mb-8">
        Kartdataene du sendte inn er visualisert nedenfor.
    </p>

    <!-- Map Card -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
        <div id="mapConfirm" class="rounded-xl border border-gray-200 shadow-inner" style="height: 450px;"></div>
        <p class="text-sm text-gray-500 mt-3">
            Kartet er sentrert p√• koordinatene du oppga.
        </p>
    </div>

    <!-- Raw Coordinates Card -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
        <h2 class="text-xl font-semibold text-purple-700 mb-3 flex items-center">
            üìç R√• kartdata
        </h2>
        <div class="bg-gray-50 p-4 rounded-lg text-sm text-gray-800 space-y-1 border border-gray-200">
            <div><strong>Breddegrad (Latitude):</strong> @displayLat</div>
            <div><strong>Lengdegrad (Longitude):</strong> @displayLng</div>
            <div><strong>Zoomniv√•:</strong> @zoomLevel</div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-center space-x-4">
        <a asp-action="Index" asp-controller="Home"
           class="bg-gray-600 text-white px-8 py-3 rounded-xl font-medium shadow-md hover:bg-gray-700 hover:shadow-lg transition">
            ‚¨ÖÔ∏è Tilbake til Hjem
        </a>
        <a asp-action="MapView" asp-controller="Map"
           class="bg-blue-600 text-white px-8 py-3 rounded-xl font-semibold shadow-md hover:bg-blue-700 hover:shadow-lg transition">
            üó∫Ô∏è Tegn p√• nytt
        </a>
    </div>
</div>

@section Scripts {
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        const startLat = @Model.Latitude;
        const startLng = @Model.Longitude;
        const zoomLevel = @Model.MapZoomLevel;

        const map = L.map('mapConfirm').setView([startLat, startLng], zoomLevel);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a>'
        }).addTo(map);

        // Marker for senterpunkt
        L.marker([startLat, startLng])
            .addTo(map)
            .bindPopup("Senterpunkt")
            .openPopup();
    </script>
}

@if (!string.IsNullOrEmpty(Model.GeoJsonCoordinates))
{
    <div class="bg-gray-50 p-4 rounded-lg text-sm text-gray-800 border border-gray-200 mt-4">
        <strong>GeoJSON-koordinater:</strong> @Model.GeoJsonCoordinates
    </div>
}

